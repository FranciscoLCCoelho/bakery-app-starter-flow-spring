<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure_9_3.dtd">

<!-- ============================================================= -->
<!-- SSL ContextFactory configuration                              -->
<!-- ============================================================= -->
<Configure id="Server" class="org.eclipse.jetty.server.Server">

    <New id="sslContextFactory" class="org.eclipse.jetty.util.ssl.SslContextFactory">
        <!-- ================= GENERATING THE KEYPAIR ===================================== -->
        <!-- keytool -genkey -keyalg RSA -keysize 2048 -validity 3650 -alias jetty          -->
        <!--         -keystore keystore.jks -keypass password -storepass password           -->
        <!--         -dname "CN=localhost, OU=Pro Tools, O=Vaadin, L=Turku, ST=Turku, C=FI" -->
        <!--         -ext san=ip:127.0.0.1                                                  -->
        <!-- ============================================================================== -->

        <!-- ================= EXPORTING THE PUBLIC KEY =================================== -->
        <!-- keytool -list -rfc -alias jetty -keystore keystore.jks -storepass password     -->
        <!--         | openssl x509 -inform pem -pubkey -noout                              -->
        <!--         | openssl rsa -pubin -out publickey.ssl                                -->
        <!-- ============================================================================== -->

        <!-- === DO NOT commit private keys and passwords into production project repos! == -->

        <Set name="KeyStorePath"><Property name="jetty.home" default="." />/src/main/resources/keystore.jks</Set>
        <Set name="KeyStorePassword">password</Set>
        <Set name="KeyManagerPassword">password</Set>
        <Set name="TrustStorePath"><Property name="jetty.home" default="." />/src/main/resources/keystore.jks</Set>
        <Set name="TrustStorePassword">password</Set>

        <Set name="IncludeCipherSuites">
            <Array type="String">
                <Item>TLS_ECDHE.*</Item>
                <Item>TLS_DHE_RSA.*</Item>
            </Array>
        </Set>

        <Set name="ExcludeCipherSuites">
            <Array type="String">
                <Item>.*NULL.*</Item>
                <Item>.*RC4.*</Item>
                <Item>.*MD5.*</Item>
                <Item>.*DES.*</Item>
                <Item>.*DSS.*</Item>
                <Item>.*CBC.*</Item>
            </Array>
        </Set>
    </New>

</Configure>