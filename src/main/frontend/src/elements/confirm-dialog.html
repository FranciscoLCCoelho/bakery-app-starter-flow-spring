<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/vaadin-button/vaadin-button.html">
<link rel="import" href="dialog-mixins.html">

<dom-module id="confirm-dialog">
  <template>
    <style include="vaadin-modal-dialog-styles">
      :host #fore {
        max-width: 400px;
        max-height: 200px;
        margin: auto;
        left: 16px;
        right: 16px;
        border-radius: var(--valo-border-radius);
        box-shadow: 0 4px 20px var(--valo-shade-20pct);
      }

      #caption {
        font-size: 14px;
        font-weight: 500;
        line-height: 1.57;
        text-align: center;
        color: rgba(42, 71, 110, 0.6);
        margin-bottom: 0;
        padding: 0 16px;
      }

      #message {
        padding: 0 16px;
        font-size: 16px;
        line-height: 1.63;
        color: rgba(53, 71, 97, 0.9);
      }

      #buttons {
        border-top: 1px solid var(--valo-contrast-10pct);
        position: absolute;
        bottom: 0;
        width: 100%;
      }

      .flex {
        display: flex;
      }

      .flex1 {
        flex: 1;
      }
    </style>

    <div id="back" on-click="close"></div>
    <div id="fore">
      <p id="caption">[[caption]]</p>
      <p class="flex1" id="message">[[message]]</p>
      <div id="buttons" class="flex">
        <vaadin-button on-click="_ok" theme="tertiary danger">[[okText]]</vaadin-button>
        <div class="flex1"></div>
        <vaadin-button on-click="_cancel" theme="tertiary" class="right">[[cancelText]]</vaadin-button>
      </div>
    </div>
  </template>

  <script>
    class ConfirmDialog extends window.CloseableDialogMixin(Polymer.Element) {
      static get is() {
        return 'confirm-dialog';
      }

      static get properties() {
        return {
          caption: {
            type: String,
            value: 'Confirmation needed'
          },
          message: {
            type: String,
            value: 'Do you want to continue?'
          },
          okText: {
            type: String,
            value: 'OK'
          },
          cancelText: {
            type: String,
            value: 'Cancel'
          },
          callback: Function
        };
      }

      _cancel() {
        this.opened = false;
        this.callback = undefined;
      }

      _ok() {
        if (this.callback) {
          this.callback();
        }
        this._cancel();
      }
    }

    window.customElements.define(ConfirmDialog.is, ConfirmDialog);
  </script>
</dom-module>
