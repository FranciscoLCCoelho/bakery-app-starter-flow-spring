<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../elements/utils-mixin.html">
<link rel="import" href="storefront-item-badge.html">
<link rel="import" href="storefront-item-goods.html">


<dom-module id="storefront-item">
  <template>
    <style include="shared-styles">
      :host {
        display: flex;
        padding: var(--valo-space-l) var(--valo-space-s);
        cursor: pointer;
      }

      .flex {
        display: flex;
      }

      #info-wrapper {
        flex-direction: column-reverse;
        justify-content: flex-end;
      }

      #status {
        width: 120px;
      }

      #time-place {
        width: 100px;
      }

      #name-items {
        flex: 1;
      }

      #place,
      #secondary-time,
      #full-day,
      #goods {
        color: var(--valo-secondary-text-color);
      }

      h3 {
        margin: 0;
      }

      @media (min-width: 600px) {
        :host {
          padding: var(--valo-space-l);
        }

        #info-wrapper {
          flex-direction: row;
        }
      }
    </style>

    <div id="info-wrapper" class="flex">
      <storefront-item-badge id="status" status="[[item.status]]"></storefront-item-badge>

      <div id="time-place">
        <template is="dom-if" if="[[_isToday(item.date)]]">
          <h3 id="time">[[_getTime(item.date)]]</h3>
          <div id="place">[[item.place]]</div>
        </template>

        <template is="dom-if" if="[[_isThisWeek(item.date)]]">
          <h3 id="short-day">[[_getShortDay(item.date)]]</h3>
          <div id="secondary-time">[[_getTime(item.date)]]</div>
          <div id="place">[[item.place]]</div>
        </template>

        <template is="dom-if" if="[[_isUpcoming(item.date)]]">
          <h3 id="month">[[_getMonth(item.date)]]</h3>
          <div id="full-day">[[_getFullDay(item.date)]]</div>
        </template>
      </div>
    </div>

    <div id="name-items">
      <h3 id="name">[[item.customer.name]]</h3>
      <storefront-item-goods items="[[item.goods]]" id="goods"></storefront-item-goods>
    </div>
  </template>

  <script>
    class StorefrontItem extends DateUtilsMixin(Polymer.Element) {
      static get is() {
        return 'storefront-item';
      }

      static get properties() {
        return {
          item: {
            type: Object
          }
        };
      }

    }

    window.customElements.define(StorefrontItem.is, StorefrontItem);
  </script>
</dom-module>
