<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/vaadin-charts/vaadin-chart.html">

<dom-module id="dashboard-pie-chart">
  <template>
    <style>
      .wrapper {
        @apply --margin-style;
        @apply --fourth-row-style;
        overflow: hidden;
      }
    </style>
    <div class="wrapper">
      <vaadin-chart id="donut" title="[[data.title]]" class="product-split-donut">
          <vaadin-chart-series values="[[data.points]]"></vaadin-chart-series>
      </vaadin-chart>

    </div>
  </template>

  <script>
    class DashboardPieChart extends Polymer.Element {
      static get is() {
        return 'dashboard-pie-chart';
      }

      static get observers() {
        return [
          '_onSeriesNameChanged(data.seriesName)'
        ];
      }

      static get properties() {
        return {
          data: {
            type: Object,
            value: function() {
              return {
                points: [{
                  name: 'fifty',
                  y: 1
                }, {
                  name: 'fifty',
                  y: 1
                }]};
            }
          }
        };
      }

      _onSeriesNameChanged(seriesName) {
        this.$.donut.update({
          series: [{
            name: seriesName
          }]
        });
      }

      connectedCallback() {
        super.connectedCallback();
        this.$.donut.update({
          title: {
            text: 'Products delivered in November',
          },
          chart: {
            borderRadius: 4,
            type: 'pie',
          },
          exporting: {
            enabled: false
          },
          series: [{
            name: 'Count',
            colorByPoint: true,
            innerSize: '60%'
          }],
          xAxis: {
            tickInterval: 1,
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
          },
          yAxis: {
            title: {
              enabled: false
            },
          },
        });
      }
    }

    window.customElements.define(DashboardPieChart.is, DashboardPieChart);
  </script>
</dom-module>
