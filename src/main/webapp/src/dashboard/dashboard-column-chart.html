<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/vaadin-charts/vaadin-chart.html">

<dom-module id="dashboard-column-chart">
    <template>
        <style>

          .wrapper {
              box-shadow: 0 2px 5px 0 rgba(23, 68, 128, 0.1);
              border-radius: 4px;
              @apply --margin-style;
              height: calc(20vh - 64px) !important;
              min-height: 150px;
          }

        </style>
        <div class="wrapper">
            <vaadin-chart id="columnchart" class="column-chart" title="[[data.title]]">
                <vaadin-chart-series values="[[data.values]]"></vaadin-chart-series>
            </vaadin-chart>
        </div>
    </template>

    <script>
    class DashboardColumnChart extends Polymer.Element {
      static get is() {
        return 'dashboard-column-chart';
      }

      static get observers() {
        return [
          '_onCategoriesChanged(data.categories)',
          '_onSeriesNameChanged(data.seriesName)'
        ];
      }

      connectedCallback() {
        super.connectedCallback();
        this.$.columnchart.update({
          chart: {
            borderRadius: 4,
            type: 'column'
          },
          xAxis: {
            tickInterval: 1,
            minorTickLength: 0,
            tickLength: 0
          },
          yAxis: {
            title: {
              enabled: false
            }
          },
          legend: {
            enabled: false
          },
          series: [{
            colorByPoint: false
          }],
          plotOptions: {
            pointWidth: 20
          }
        });
      }

      _onCategoriesChanged(categories) {
        this.$.columnchart.update({
          xAxis: {
            categories: categories
          }
        });
      }

      _onSeriesNameChanged(seriesName) {
        this.$.columnchart.update({
          series: [{
            name: seriesName
          }]
        });
      }
    }

    window.customElements.define(DashboardColumnChart.is, DashboardColumnChart);
    </script>
</dom-module>
