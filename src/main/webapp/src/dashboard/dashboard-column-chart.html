<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/vaadin-charts/data-series.html">
<link rel="import" href="../../bower_components/vaadin-charts/vaadin-column-chart.html">

<dom-module id="dashboard-column-chart">

	<template>
		<style>

			.wrapper {
				box-shadow: 0 2px 5px 0 rgba(23, 68, 128, 0.1);
				border-radius: 4px;
				@apply --margin-style;
				@apply --column-chart-height;
			}

		</style>
		<div class="wrapper">
			<vaadin-column-chart>
				<chart border-radius="4" background-color="var(--valo-tint)"></chart>
				<chart-title>
					<chart-style>
						<color>rgba(42, 71, 110, 0.6)</color>
						<font-size>16px</font-size>
						<font-weight>bold</font-weight>
					</chart-style>
					<text>[[data.title]]</text>
				</chart-title>
				<x-axis tick-interval="1">
					<categories>[[data.categories]]</categories>
				</x-axis>
				<y-axis>
					<chart-title enabled="false"></chart-title>
				</y-axis>
				<legend enabled="false"></legend>
				<data-series>
					<name>[[data.seriesName]]</name>
					<color-by-point>false</color-by-point>
					<data>
						<template is="dom-repeat" items="[[data.values]]">
							<point>
								<template is="dom-if" if="[[_shouldBeHighlighted(index)]]">
									<color>rgba(24, 119, 242, 0.5)</color>
								</template>
								<template is="dom-if" if="[[!_shouldBeHighlighted(index)]]">
									<color>rgba(34, 70, 117, 0.5)</color>
								</template>
								<y>[[item]]</y>
							</point>
						</template>
					</data>
				</data-series>
				<exporting>
					<enabled>false</enabled>
				</exporting>
			</vaadin-column-chart>
		</div>
	</template>

	<script>
    class DashboardColumnChart extends Polymer.Element {
      static get is() {
        return 'dashboard-column-chart';
      }

      _shouldBeHighlighted(index) {
        return index === this.data.columnHighlighted;
      }
    }

    window.customElements.define(DashboardColumnChart.is, DashboardColumnChart);
	</script>
</dom-module>
