<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/vaadin-charts/vaadin-areaspline-chart.html">

<dom-module id="dashboard-yearly-sales">
  <template>
    <style>
      :host {
        flex: 1;
      }

      .wrapper {
        height: calc(30vh - 64px) !important;
        min-height: 200px;
      }
    </style>
    <div class="wrapper">
      <vaadin-areaspline-chart id="saleschart">
        <chart-title>
          <text>[[title]]</text>
          <chart-style>
            <color>rgba(42, 71, 110, 0.6)</color>
            <font-size>16px</font-size>
            <font-weight>bold</font-weight>
          </chart-style>
        </chart-title>

        <colors>["#18ddf2","#1877f3","#1bca66"]</colors>

        <template is="dom-repeat" items="[[series]]">
          <data-series>
            <name>[[item.title]]</name>
            <data>
              [[item.series]]
            </data>
          </data-series>
        </template>

        <chart>
          <background-color>rgba(0,0,0,0)</background-color>
        </chart>

        <exporting>
          <enabled>false</enabled>
        </exporting>

        <y-axis>
          <title>
            <text></text>
          </title>
          <grid-line-color>rgba(23, 68, 128, 0.1)</grid-line-color>
        </y-axis>

        <x-axis>
          <categories>Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec</categories>
          <labels>
            <enabled>
              false
            </enabled>
          </labels>
        </x-axis>

        <plot-options>
          <areaspline fill-opacity="0.1">
          </areaspline>
        </plot-options>

        <legend>
          <background-color>transparent</background-color>
          <symbol-radius>6</symbol-radius>
          <symbol-height>12</symbol-height>
          <symbol-width>12</symbol-width>
        </legend>
      </vaadin-areaspline-chart>
    </div>
  </template>

  <script>
    class DashboardYearlySales extends Polymer.Element {
      static get is() {
        return 'dashboard-yearly-sales';
      }

      static get properties() {
        return {
          'series': {
            type: Object
          },
          'title': {
            type: String,
            value: '-',
            notify: true
          }
        };
      }

      connectedCallback() {
        super.connectedCallback();
        setTimeout(() => this.$.saleschart.reloadConfiguration(), 500);

      }
    }

    window.customElements.define(DashboardYearlySales.is, DashboardYearlySales);
  </script>
</dom-module>