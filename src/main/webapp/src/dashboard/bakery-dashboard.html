<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/vaadin-board/vaadin-board.html">
<link rel="import" href="../../bower_components/vaadin-board/vaadin-board-row.html">
<link rel="import" href="../app/style-modules/bakery-charts-default-theme.html">

<link rel="import" href="dashboard-orders-counter.html">
<link rel="import" href="dashboard-pie-chart.html">
<link rel="import" href="dashboard-counter-label.html">

<dom-module id="bakery-dashboard">
  <template>
    <style include="shared-styles bakery-charts-default-theme">
      :host {
        display: block;
        width: 100%;
        padding: var(--valo-space-s);
        -webkit-overflow-scrolling: touch;
        overflow-y: scroll;
      }

      .vaadin-board-cell {
        /*
         If a cell in a vaadin-board has margins or padding it needs to be wrapped into
         a div to work around the IE11 flex box issue. See the Known Issues section at
         https://vaadin.com/docs/v8/board/webcomponents-api/board-basic-use.html

         This class is an indicator for such divs.
        */
      }

      dashboard-pie-chart {
        --fourth-row-style: {
          border-radius: 4px;
          box-shadow: 0 2px 5px 0 rgba(23, 68, 128, 0.1);
          height: calc(40vh - 64px) !important;
          min-height: 355px;
        }
      }

      vaadin-board-row > * {
        --margin-style: {
          margin: 12px 6px;
        };
      }

      .column-chart {
        box-shadow: 0 2px 5px 0 rgba(23, 68, 128, 0.1);
        border-radius: 4px;
        margin: 12px 6px;
        height: calc(20vh - 64px) !important;
        min-height: 150px;
      }

      #yearly-sales-graph {
        height: calc(30vh - 64px) !important;
        min-height: 200px;
      }

      #orders-grid {
        margin: 12px 6px;
        border-radius: 4px;
        box-shadow: 0 2px 5px 0 rgba(23, 68, 128, 0.1);
        height: calc(40vh - 64px) !important;
        min-height: 355px;
      }

    </style>

    <vaadin-board>
      <vaadin-board-row>
        <dashboard-orders-counter data="[[todayOrdersCount]]"></dashboard-orders-counter>
        <dashboard-counter-label label-data="[[notAvailableOrdersCount]]" class="red"></dashboard-counter-label>
        <dashboard-counter-label label-data="[[newOrdersCount]]" class="blue"></dashboard-counter-label>
        <dashboard-counter-label label-data="[[tomorrowOrdersCount]]" class="gray"></dashboard-counter-label>
      </vaadin-board-row>
      <vaadin-board-row>
        <div class="vaadin-board-cell">
          <vaadin-chart id="deliveries-this-month" class="column-chart"></vaadin-chart>
        </div>
        <div class="vaadin-board-cell">
          <vaadin-chart id="deliveries-this-year" class="column-chart"></vaadin-chart>
        </div>
      </vaadin-board-row>
      <vaadin-board-row>
        <vaadin-chart id="yearly-sales-graph" class="yearly-sales"></vaadin-chart>
      </vaadin-board-row>
      <vaadin-board-row>
        <dashboard-pie-chart data="[[productDeliveriesThisMonth]]"></dashboard-pie-chart>
        <div class="vaadin-board-cell">
          <vaadin-grid id="orders-grid"></vaadin-grid>
        </div>
      </vaadin-board-row>
    </vaadin-board>
  </template>

  <script>
    class BakeryDashboard extends Polymer.Element {
      static get is() {
        return 'bakery-dashboard';
      }
    }

    window.customElements.define(BakeryDashboard.is, BakeryDashboard);
  </script>
</dom-module>
