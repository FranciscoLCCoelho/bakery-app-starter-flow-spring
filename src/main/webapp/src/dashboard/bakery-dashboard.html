<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/vaadin-board/vaadin-board.html">
<link rel="import" href="../../bower_components/vaadin-board/vaadin-board-row.html">

<link rel="import" href="dashboard-orders-counter.html">
<link rel="import" href="dashboard-column-chart.html">
<link rel="import" href="dashboard-yearly-sales.html">
<link rel="import" href="dashboard-pie-chart.html">
<link rel="import" href="dashboard-orders-list.html">

<dom-module id="bakery-dashboard">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        width: 100%;
        padding: var(--valo-space-s);
        -webkit-overflow-scrolling: touch;
        overflow-y: scroll;
      }

      @media screen and (min-width: 600px) {
        :host {
          margin: 6px;
        }
      }

      dashboard-pie-chart,
      dashboard-orders-list {
        --fourth-row-style: {
          border-radius: 4px;
          box-shadow: 0 2px 5px 0 rgba(23, 68, 128, 0.1);
          height: calc(40vh - 64px) !important;
          min-height: 355px;
        }
      }

      vaadin-board vaadin-board-row:nth-child(2) > * {
        --column-chart-height: {
          height: calc(20vh - 64px) !important;
          min-height: 150px;
        }
      }

      vaadin-board-row:not(.small) {
        --margin-style: {
          margin: 12px 6px;
        };
      }

      vaadin-board-row.small > * {
        --margin-style: {
          margin: 6px 0;
        };
      }

    </style>

    <vaadin-board>
      <vaadin-board-row>
        <dashboard-orders-counter data="[[todayOrdersCount]]" count-color="#55BF3B" display-chart="true"></dashboard-orders-counter>
        <dashboard-orders-counter data="[[notAvailableOrdersCount]]" count-color="#ff473a"></dashboard-orders-counter>
        <dashboard-orders-counter data="[[newOrdersCount]]" count-color="#1877f3"></dashboard-orders-counter>
        <dashboard-orders-counter data="[[tomorrowOrdersCount]]" count-color="rgba(45, 71, 105, 0.7)"></dashboard-orders-counter>
      </vaadin-board-row>
      <vaadin-board-row>
        <dashboard-column-chart data="[[deliveriesThisMonth]]"></dashboard-column-chart>
        <dashboard-column-chart data="[[deliveriesThisYear]]"></dashboard-column-chart>
      </vaadin-board-row>
      <vaadin-board-row>
        <dashboard-yearly-sales series="[[salesGraphSeries]]" title="[[salesGraphTitle]]"></dashboard-yearly-sales>
      </vaadin-board-row>
      <vaadin-board-row>
        <dashboard-pie-chart data="[[productDeliveriesThisMonth]]"></dashboard-pie-chart>
        <dashboard-orders-list id="ordersList" orders-count="[[ordersCount]]" on-page-request="loadOrdersPage"></dashboard-orders-list>
      </vaadin-board-row>
    </vaadin-board>
  </template>

  <script>
    class BakeryDashboard extends Polymer.Element {
      static get is() {
        return 'bakery-dashboard';
      }

      loadPage(pageInfo) {
        this.$.ordersList.loadPage(pageInfo);
      }
    }

    window.customElements.define(BakeryDashboard.is, BakeryDashboard);
  </script>
</dom-module>
